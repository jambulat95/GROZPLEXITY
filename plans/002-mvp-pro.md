Мы переходим к **Level 2: "Analyst"**.
У нас уже есть скачанное видео, транскрипция (текст + сегменты) и папка с фреймами (скриншотами).

Теперь нужно реализовать `services/analyzer.py`, используя **Google Gemini 1.5 Flash**.

### Задача:
Реализовать функцию `analyze_video_style`, которая принимает:
1. Текст транскрипции (string).
2. Список путей к файлам скриншотов (list of paths).

И возвращает **JSON** структуру (Style Passport).

### Требования к реализации:

1. **Библиотека:** Используй `google-generativeai`.
2. **Модель:** `gemini-1.5-flash` (она быстрая и дешевая/бесплатная).
3. **Обработка картинок:**
   - Перед отправкой загружай картинки с помощью PIL (Pillow).
   - ВАЖНО: Не отправляй слишком много кадров. Если видео длинное, сделай выборку (sampling): бери 1 кадр каждые 3 секунды.
   - Оптимизация: Делай resize картинок до ширины 512px (сохраняя пропорции), чтобы ускорить API запрос.
4. **System Prompt (Инструкция нейросети):**
   Составь мощный промпт. Роль: "Ты профессиональный режиссер монтажа и маркетолог".
   Задача: Проанализируй аудио-текст и визуальный ряд.
   Вывод должен быть строго в JSON:
   ```json
   {
     "hook_analysis": "Описание, чем цепляет начало (0-5 сек)",
     "pacing_wpm": 150, (примерная оценка слов в минуту, если можешь, или 'fast/slow')
     "visual_style": "Описание визуального стиля (цвета, динамика, смена планов)",
     "audio_tone": "Тон голоса (агрессивный, дружелюбный, экспертный)",
     "structure": [
       {"time": "00:00-00:05", "block": "Hook", "description": "..."},
       {"time": "00:05-00:20", "block": "Body", "description": "..."}
     ],
     "virality_score": 8 (оценка от 1 до 10),
     "key_elements": ["быстрая нарезка", "субтитры по центру", "мемы"]
   }

Config: API Key бери из os.getenv("GOOGLE_API_KEY").
Integration: Обнови main.py -> endpoint /api/v1/analyze. Теперь он должен после транскрибации вызывать этот анализ и возвращать объединенный результат.

Напиши код для app/services/analyzer.py и обнови app/main.py. Не забудь добавить google-generativeai и Pillow в requirements.

**Действия после генерации кода:**
1.  Сделай `pip install google-generativeai Pillow`.
2.  Перезапусти сервер.

Как сделаешь — тестируй! Бот должен выдать большой красивый JSON с разбором видео.